name: Deploy Test

on:
  push:
    branches:
      - staging

  workflow_dispatch:
    inputs:
      environment:
        description: "Environment"
        required: true
        default: "dev"
        type: choice
        options:
          - "dev"
          - "stg"
          - "prd"

jobs:
  deploy:
    runs-on: ubuntu-latest
    # ã“ã® environment è¨­å®šãŒé‡è¦ï¼GitHub Environmentsã®ä¿è­·ãƒ«ãƒ¼ãƒ«ã‚’æœ‰åŠ¹åŒ–
    environment: ${{ github.event.inputs.environment || 'stg' }}

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show deployment info
        run: |
          echo "ğŸš€ Deploying to: ${{ github.event.inputs.environment || 'stg' }}"
          echo "ğŸ“¦ Branch: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Triggered by: ${{ github.actor }}"
          echo "â° Timestamp: $(date)"

      - name: Simulate deployment
        run: |
          echo "Starting deployment..."
          sleep 5
          echo "Deployment completed successfully!"

      - name: Post-deployment info
        run: |
          echo "âœ… Deployment to ${{ github.event.inputs.environment || 'stg' }} finished"
